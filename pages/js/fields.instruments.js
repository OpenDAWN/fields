!function n(t,e,r){function i(o,a){if(!e[o]){if(!t[o]){var s="function"==typeof require&&require;if(!a&&s)return s(o,!0);if(u)return u(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=e[o]={exports:{}};t[o][0].call(c.exports,function(n){var e=t[o][1][n];return i(e?e:n)},c,c.exports,n,t,e,r)}return e[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(n,t,e){var r=n("underscore"),i=e.BaseSound=function(){this.mixer=fields.sound.audioContext.createGain(),this.mixer.gain.value=0,this.mixer.connect(fields.sound.audioContext.destination),this.started=!1};r.extend(i.prototype,{start:function(){this.started===!1&&(this.started=!0,this._start())},stop:function(){this.started===!0&&(this.started=!1,this._stop())},_start:function(){},_stop:function(){}});var u=e.BaseControls=function(){this.started=!1};r.extend(u.prototype,{start:function(){this.started===!1&&(this.started=!0,this._start())},stop:function(){this.started===!0&&(this.started=!1,this._stop())},_start:function(){},_stop:function(){}})},{underscore:10}],2:[function(n,t,e){var r=(n("async"),n("underscore")),i=n("../utils/waa"),u=n("../utils/widgets"),o=n("./base");e.sound=function(n,t,e){var r=new a(t,e);return r.instrumentId=n,r};var a=function(n,t){o.BaseSound.apply(this),this.trackId=rhizome.userId%t.length,this.soundUrl=t[this.trackId],this.buffer=null,this.bufferNode=null,this.started=!1};r.extend(a.prototype,o.BaseSound.prototype,{load:function(n){var t=this;i.loadBuffer(this.soundUrl,function(e,r){e||(t.buffer=r),fields.log(t.instrumentId+" loaded, track "+t.trackId+" buffer length :"+t.buffer.length),n(e)})},setParameter:function(n,t){"note"===n&&t[0]===this.trackId&&this.started&&(this.bufferNode=audioContext.createBufferSource(),this.bufferNode.connect(this.mixer),this.bufferNode.buffer=this.buffer,this.bufferNode.start(0))}}),e.controls=function(n,t,e){return new s(n,t,e)};var s=function(n,t,e){this.instrumentId=n,this.trackCount=e.length,this.tracks=e,this.stepCount=t,this.container=$("<div>",{"class":"instrument centralizedSequencer"}),this.currentStep=-1,this.tickEvent=null,this.started=!1,u.grid("normal",e.length,t).appendTo(this.container)};r.extend(s.prototype,o.BaseControls.prototype,{_start:function(){var n=this;this.currentStep=-1,this.tickEvent=fields.controls.clock.setTimeout(function(){n.currentStep=(n.currentStep+1)%n.stepCount,r.forEach(n.tracks,function(t,e){n.container.find(".track-"+e+" .step-"+n.currentStep).hasClass("active")&&rhizome.send("/"+n.instrumentId+"/note",[e])}),n.container.find(".step").removeClass("current"),n.container.find(".step-"+n.currentStep).addClass("current")},.2).repeat(.2)},_stop:function(){this.tickEvent.clear()}})},{"../utils/waa":12,"../utils/widgets":13,"./base":1,async:8,underscore:10}],3:[function(n,t,e){var r=n("underscore"),i=n("async"),u=n("../utils/waa"),o=n("../utils/widgets"),a=n("./base");e.sound=function(n,t,e,r){var i=new s(t,e,r);return i.instrumentId=n,i};var s=function(n,t,e){a.BaseSound.apply(this),this.stepCount=n,this.tracks=t,this.buffers=[],this._setTempo(e),this.sequence=[],this.bufferNode=null,this.started=!1};r.extend(s.prototype,a.BaseSound.prototype,{load:function(n){var t=this;i.map(this.tracks,u.loadBuffer,function(e,r){e||(t.buffers=r,fields.log(t.instrumentId+" loaded, tempo "+t.tempo)),n(e)})},_start:function(){this._playSequence()},_stop:function(){this.bufferNode.stop(0),this.bufferNode=null},setParameter:function(n,t){if("sequence"===n){var e,i,u=[];for(e=0,i=1;e<t.length;e+=2,i+=2)u.push([t[e],t[i]]);this.sequence=r.sortBy(u,function(n){return n[1]}),this.started&&this._playSequence()}else"tempo"===n&&(this._setTempo(t[0]),this.started&&this._playSequence())},_setTempo:function(n){this.tempo=n,this.beatDurInSec=60/n,this.samplesPerBeat=this.beatDurInSec*fields.sound.audioContext.sampleRate,this.samplesPerLoop=this.samplesPerBeat*this.stepCount},_playSequence:function(){var n=this,t=fields.sound.audioContext.createBuffer(1,this.samplesPerLoop,fields.sound.audioContext.sampleRate),e=t.getChannelData(0);r.forEach(this.sequence,function(t){var r=t[1],i=t[0],u=n.samplesPerBeat*r,o=n.buffers[i].getChannelData(0);subarray=u+o.length>=e.length?o.subarray(0,e.length-u):o,e.set(subarray,u)}),this.bufferNode&&this.bufferNode.stop(0),this.bufferNode=fields.sound.audioContext.createBufferSource(),this.bufferNode.connect(this.mixer),this.bufferNode.loop=!0,this.bufferNode.buffer=t,this.bufferNode.start(0)}}),e.controls=function(n,t,e){return new c(n,t,e)};var c=function(n,t,e){this.stepCount=t,this.tracks=e;var r=(e.length,$("<div>",{"class":"instrument distributedSequencer"})),i=$("<button>",{"class":"sendButton"}).appendTo(r).html("Send"),u=o.grid("toggle",e.length,t);u.appendTo(r),i.click(function(){var t=[];u.find(".track").each(function(n,e){$(e).find(".step").each(function(e,r){$(r).hasClass("active")&&(t.push(n),t.push(e))})}),rhizome.send("/"+n+"/sequence",t)}),this.container=r};r.extend(c.prototype,a.BaseControls.prototype,{})},{"../utils/waa":12,"../utils/widgets":13,"./base":1,async:8,underscore:10}],4:[function(n){fields.instruments={},fields.instruments.distributedSequencer=n("./distributedSequencer"),fields.instruments.centralizedSequencer=n("./centralizedSequencer"),fields.instruments.granulator=n("./granulator"),fields.instruments.whiteNoise=n("./whiteNoise"),fields.instruments.trigger=n("./trigger")},{"./centralizedSequencer":2,"./distributedSequencer":3,"./granulator":5,"./trigger":6,"./whiteNoise":7}],5:[function(n,t,e){var r=n("underscore"),i=n("../utils/waa"),u=n("../utils/widgets"),o=n("../utils/math"),a=n("./base");e.sound=function(n,t){return new s(n,t)};var s=function(n,t){a.BaseSound.apply(this),this.params={position:[0,0],duration:[.1,0],ratio:[1,0],env:0,density:0},this.url=t,this.instrumentId=n,this.started=!1};r.extend(s.prototype,a.BaseSound.prototype,{load:function(n){var t=this;i.loadBuffer(this.url,function(e,r){e||(t.buffer=r),fields.log(t.instrumentId+" loaded, buffer length :"+t.buffer.length),n(e)})},_start:function(){this.grainEvent&&this.grainEvent.clear();var n=this;this.clock=new WAAClock(fields.sound.audioContext),this.grainEvent=this.clock.setTimeout(function(){var t=n._getDuration();n._enjoyTheSilence()?n.grainEvent.repeat(t/2||.005):(t=n._playSound(n.url,n.mixer,n._getPosition(),t,n._getRatio(),n.params.env),n.grainEvent.repeat(t||.005))},.1).repeat(.1)},_stop:function(){this.grainEvent&&this.grainEvent.clear(),this.clock},setParameter:function(n,t){this.params[n]=t},_getPosition:function(){var n=this.params.position[0]*(this.buffer.length/fields.sound.audioContext.sampleRate);return o.pickVal(n,this.params.position[1])},_getDuration:function(){var n=this.params.duration[0];return Math.max(.01,o.pickVal(4*o.valExp(n),this.params.duration[1]))},_getRatio:function(){var n=[.5,.75,1],t=this.params.ratio[0];return this.params.quantize_ratio?t*n[Math.floor(.99*Math.random()*n.length)]:Math.max(.05,o.pickVal(t,this.params.ratio[1]))},_enjoyTheSilence:function(){var n=Math.random()>this.params.density,t=Math.random()>this.params.density;return n||t},_playSound:function(n,t,e,r,i,u){var o=this.buffer.length/fields.sound.audioContext.sampleRate,a=o-e;if(r=Math.min(a/i,r),0>=r)return 0;var s=fields.sound.audioContext.createBufferSource(),c=fields.sound.audioContext.createGain();s.playbackRate.value=i,s.buffer=this.buffer;var l=Math.max(r*(u/2),.002);return c.gain.setValueAtTime(0,fields.sound.audioContext.currentTime),c.gain.linearRampToValueAtTime(1,fields.sound.audioContext.currentTime+l),c.gain.linearRampToValueAtTime(1,fields.sound.audioContext.currentTime+r-l),c.gain.linearRampToValueAtTime(0,fields.sound.audioContext.currentTime+r),s.connect(c),c.connect(t),s.start(0,e,r),r}}),e.controls=function(n,t){return new c(n,t)};var c=function(n){this.container=$("<div>",{"class":"instrument granulator"});var t=100,e=rhizome.utils.throttle(t,function(t){rhizome.send("/"+n+"/duration",t)});u.xyPad({title:"duration",xLabel:"mean",yLabel:"variance"},function(n,t){e([n,t])}).appendTo(this.container);var r=rhizome.utils.throttle(t,function(t){rhizome.send("/"+n+"/position",t)});u.xyPad({title:"position",xLabel:"mean",yLabel:"variance"},function(n,t){r([n,t])}).appendTo(this.container);var i=rhizome.utils.throttle(t,function(t){rhizome.send("/"+n+"/ratio",t)});u.xyPad({title:"ratio",xLabel:"mean",yLabel:"variance"},function(n,t){i([n,t])}).appendTo(this.container);var o=rhizome.utils.throttle(t,function(t){rhizome.send("/"+n+"/density",t)});u.slider({title:"density"},function(n){o([n])}).appendTo(this.container);var a=rhizome.utils.throttle(t,function(t){rhizome.send("/"+n+"/env",t)});u.slider({title:"enveloppe"},function(n){a([n])}).appendTo(this.container)};r.extend(c.prototype,a.BaseControls.prototype,{})},{"../utils/math":11,"../utils/waa":12,"../utils/widgets":13,"./base":1,underscore:10}],6:[function(n,t,e){var r=n("underscore"),i=n("../utils/waa"),u=(n("../utils/widgets"),n("../utils/math"),n("./base"));e.sound=function(n,t){return new o(n,t)};var o=function(n,t){u.BaseSound.apply(this),this.url=t,this.instrumentId=n};r.extend(o.prototype,u.BaseSound.prototype,{load:function(n){var t=this;i.loadBuffer(this.url,function(e,r){e||(t.buffer=r),fields.log(t.instrumentId+" loaded, buffer length :"+t.buffer.length),n(e)})},_start:function(){this.bufferNode=fields.sound.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.mixer),this.bufferNode.start(0)},_stop:function(){},setParameter:function(){}}),e.controls=function(n,t){return new a(n,t)};var a=function(){this.container=$("<div>",{"class":"instrument trigger"})};r.extend(a.prototype,u.BaseControls.prototype,{})},{"../utils/math":11,"../utils/waa":12,"../utils/widgets":13,"./base":1,underscore:10}],7:[function(n,t,e){var r=(n("async"),n("underscore")),i=(n("../utils/waa"),n("./base"));e.sound=function(n){var t=new u;return t.instrumentId=n,t};var u=function(){i.BaseSound.apply(this);var n=44100;this.noiseBuffer=fields.sound.audioContext.createBuffer(1,n,44100);var t,e=this.noiseBuffer.getChannelData(0);for(t=0;n>t;t++)e[t]=Math.random()};r.extend(u.prototype,i.BaseSound.prototype,{load:function(n){n()},_start:function(){this.bufferNode=fields.sound.audioContext.createBufferSource(),this.bufferNode.buffer=this.noiseBuffer,this.bufferNode.loop=!0,this.bufferNode.connect(this.mixer),this.bufferNode.start(0)},_stop:function(){this.bufferNode.stop(0)},setParameter:function(){}}),e.controls=function(){return new o};var o=function(){i.BaseControls.apply(this),this.container=$("<div>",{"class":"instrument whiteNoise"})};r.extend(o.prototype,i.BaseControls.prototype,{})},{"../utils/waa":12,"./base":1,async:8,underscore:10}],8:[function(n,t){(function(n){!function(){function e(n){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,n.apply(r,arguments)}}var r,i,u={};r=this,null!=r&&(i=r.async),u.noConflict=function(){return r.async=i,u};var o=Object.prototype.toString,a=Array.isArray||function(n){return"[object Array]"===o.call(n)},s=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},c=function(n,t){if(n.map)return n.map(t);var e=[];return s(n,function(n,r,i){e.push(t(n,r,i))}),e},l=function(n,t,e){return n.reduce?n.reduce(t,e):(s(n,function(n,r,i){e=t(e,n,r,i)}),e)},f=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof n&&n.nextTick?(u.nextTick=n.nextTick,u.setImmediate="undefined"!=typeof setImmediate?function(n){setImmediate(n)}:u.nextTick):"function"==typeof setImmediate?(u.nextTick=function(n){setImmediate(n)},u.setImmediate=u.nextTick):(u.nextTick=function(n){setTimeout(n,0)},u.setImmediate=u.nextTick),u.each=function(n,t,r){function i(t){t?(r(t),r=function(){}):(u+=1,u>=n.length&&r())}if(r=r||function(){},!n.length)return r();var u=0;s(n,function(n){t(n,e(i))})},u.forEach=u.each,u.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,i=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e():i())})};i()},u.forEachSeries=u.eachSeries,u.eachLimit=function(n,t,e,r){var i=p(t);i.apply(null,[n,e,r])},u.forEachLimit=u.eachLimit;var p=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var i=0,u=0,o=0;!function a(){if(i>=t.length)return r();for(;n>o&&u<t.length;)u+=1,o+=1,e(t[u-1],function(n){n?(r(n),r=function(){}):(i+=1,o-=1,i>=t.length?r():a())})}()}},d=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[u.each].concat(t))}},h=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[p(n)].concat(e))}},v=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[u.eachSeries].concat(t))}},m=function(n,t,e,r){if(t=c(t,function(n,t){return{index:t,value:n}}),r){var i=[];n(t,function(n,t){e(n.value,function(e,r){i[n.index]=r,t(e)})},function(n){r(n,i)})}else n(t,function(n,t){e(n.value,function(n){t(n)})})};u.map=d(m),u.mapSeries=v(m),u.mapLimit=function(n,t,e,r){return g(t)(n,e,r)};var g=function(n){return h(n,m)};u.reduce=function(n,t,e,r){u.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){r(n,t)})},u.inject=u.reduce,u.foldl=u.reduce,u.reduceRight=function(n,t,e,r){var i=c(n,function(n){return n}).reverse();u.reduce(i,t,e,r)},u.foldr=u.reduceRight;var y=function(n,t,e,r){var i=[];t=c(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&i.push(n),t()})},function(){r(c(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};u.filter=d(y),u.filterSeries=v(y),u.select=u.filter,u.selectSeries=u.filterSeries;var b=function(n,t,e,r){var i=[];t=c(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||i.push(n),t()})},function(){r(c(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};u.reject=d(b),u.rejectSeries=v(b);var x=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(){r()})};u.detect=d(x),u.detectSeries=v(x),u.some=function(n,t,e){u.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(){e(!1)})},u.any=u.some,u.every=function(n,t,e){u.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(){e(!0)})},u.all=u.every,u.sortBy=function(n,t,e){u.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};e(null,c(t.sort(r),function(n){return n.value}))})},u.auto=function(n,t){t=t||function(){};var e=f(n),r=e.length;if(!r)return t();var i={},o=[],c=function(n){o.unshift(n)},p=function(n){for(var t=0;t<o.length;t+=1)if(o[t]===n)return void o.splice(t,1)},d=function(){r--,s(o.slice(0),function(n){n()})};c(function(){if(!r){var n=t;t=function(){},n(null,i)}}),s(e,function(e){var r=a(n[e])?n[e]:[n[e]],o=function(n){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),n){var o={};s(f(i),function(n){o[n]=i[n]}),o[e]=r,t(n,o),t=function(){}}else i[e]=r,u.setImmediate(d)},h=r.slice(0,Math.abs(r.length-1))||[],v=function(){return l(h,function(n,t){return n&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(e)};if(v())r[r.length-1](o,i);else{var m=function(){v()&&(p(m),r[r.length-1](o,i))};c(m)}})},u.retry=function(n,t,e){var r=5,i=[];"function"==typeof n&&(e=t,t=n,n=r),n=parseInt(n,10)||r;var o=function(r,o){for(var a=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},o)}};n;)i.push(a(t,!(n-=1)));u.series(i,function(n,t){t=t[t.length-1],(r||e)(t.err,t.result)})};return e?o():o},u.waterfall=function(n,t){if(t=t||function(){},!a(n)){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var r=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=n.next();i.push(o?r(o):t),u.setImmediate(function(){n.apply(null,i)})}}};r(u.iterator(n))()};var w=function(n,t,e){if(e=e||function(){},a(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(f(t),function(n,e){t[n](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[n]=i,e(t)})},function(n){e(n,r)})}};u.parallel=function(n,t){w({map:u.map,each:u.each},n,t)},u.parallelLimit=function(n,t,e){w({map:g(t),each:p(t)},n,e)},u.series=function(n,t){if(t=t||function(){},a(n))u.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};u.eachSeries(f(n),function(t,r){n[t](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e[t]=i,r(n)})},function(n){t(n,e)})}},u.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},u.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var k=function(n,t,e,r){var i=[];n(t,function(n,t){e(n,function(n,e){i=i.concat(e||[]),t(n)})},function(n){r(n,i)})};u.concat=d(k),u.concatSeries=v(k),u.whilst=function(n,t,e){n()?t(function(r){return r?e(r):void u.whilst(n,t,e)}):e()},u.doWhilst=function(n,t,e){n(function(r){if(r)return e(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?u.doWhilst(n,t,e):e()})},u.until=function(n,t,e){n()?e():t(function(r){return r?e(r):void u.until(n,t,e)})},u.doUntil=function(n,t,e){n(function(r){if(r)return e(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?e():u.doUntil(n,t,e)})},u.queue=function(n,t){function r(n,t,e,r){return n.started||(n.started=!0),a(t)||(t=[t]),0==t.length?u.setImmediate(function(){n.drain&&n.drain()}):void s(t,function(t){var i={data:t,callback:"function"==typeof r?r:null};e?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),u.setImmediate(n.process)})}void 0===t&&(t=1);var i=0,o={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(n,t){r(o,n,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(n,t){r(o,n,!0,t)},process:function(){if(!o.paused&&i<o.concurrency&&o.tasks.length){var t=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),i+=1;var r=function(){i-=1,t.callback&&t.callback.apply(t,arguments),o.drain&&o.tasks.length+i===0&&o.drain(),o.process()},u=e(r);n(t.data,u)}},length:function(){return o.tasks.length},running:function(){return i},idle:function(){return o.tasks.length+i===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},u.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function r(n,t,e){for(var r=-1,i=n.length-1;i>r;){var u=r+(i-r+1>>>1);e(t,n[u])>=0?r=u:i=u-1}return r}function i(n,t,i,o){return n.started||(n.started=!0),a(t)||(t=[t]),0==t.length?u.setImmediate(function(){n.drain&&n.drain()}):void s(t,function(t){var a={data:t,priority:i,callback:"function"==typeof o?o:null};n.tasks.splice(r(n.tasks,a,e)+1,0,a),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),u.setImmediate(n.process)})}var o=u.queue(n,t);return o.push=function(n,t,e){i(o,n,t,e)},delete o.unshift,o},u.cargo=function(n,t){var e=!1,r=[],i={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,e){a(n)||(n=[n]),s(n,function(n){r.push({data:n,callback:"function"==typeof e?e:null}),i.drained=!1,i.saturated&&r.length===t&&i.saturated()}),u.setImmediate(i.process)},process:function o(){if(!e){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var u="number"==typeof t?r.splice(0,t):r.splice(0,r.length),a=c(u,function(n){return n.data});i.empty&&i.empty(),e=!0,n(a,function(){e=!1;var n=arguments;s(u,function(t){t.callback&&t.callback.apply(null,n)}),o()})}},length:function(){return r.length},running:function(){return e}};return i};var S=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&s(e,function(t){console[n](t)}))}]))}};u.log=S("log"),u.dir=S("dir"),u.memoize=function(n,t){var e={},r={};t=t||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in e?u.nextTick(function(){o.apply(null,e[a])}):a in r?r[a].push(o):(r[a]=[o],n.apply(null,i.concat([function(){e[a]=arguments;var n=r[a];delete r[a];for(var t=0,i=n.length;i>t;t++)n[t].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=n,i},u.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},u.times=function(n,t,e){for(var r=[],i=0;n>i;i++)r.push(i);return u.map(r,t,e)},u.timesSeries=function(n,t,e){for(var r=[],i=0;n>i;i++)r.push(i);return u.mapSeries(r,t,e)},u.seq=function(){var n=arguments;return function(){var t=this,e=Array.prototype.slice.call(arguments),r=e.pop();u.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){r.apply(t,[n].concat(e))})}},u.compose=function(){return u.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};u.applyEach=d(_),u.applyEachSeries=v(_),u.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof t&&t.exports?t.exports=u:"undefined"!=typeof define&&define.amd?define([],function(){return u}):r.async=u}()}).call(this,n("1YiZ5S"))},{"1YiZ5S":9}],9:[function(n,t){function e(){}var r=t.exports={};r.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(t){var e=[];return window.addEventListener("message",function(n){var t=n.source;if((t===window||null===t)&&"process-tick"===n.data&&(n.stopPropagation(),e.length>0)){var r=e.shift();r()}},!0),function(n){e.push(n),window.postMessage("process-tick","*")}}return function(n){setTimeout(n,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=e,r.addListener=e,r.once=e,r.off=e,r.removeListener=e,r.removeAllListeners=e,r.emit=e,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],10:[function(n,t,e){(function(){var n=this,r=n._,i={},u=Array.prototype,o=Object.prototype,a=Function.prototype,s=u.push,c=u.slice,l=u.concat,f=o.toString,p=o.hasOwnProperty,d=u.forEach,h=u.map,v=u.reduce,m=u.reduceRight,g=u.filter,y=u.every,b=u.some,x=u.indexOf,w=u.lastIndexOf,k=Array.isArray,S=Object.keys,_=a.bind,T=function(n){return n instanceof T?n:this instanceof T?void(this._wrapped=n):new T(n)};"undefined"!=typeof e?("undefined"!=typeof t&&t.exports&&(e=t.exports=T),e._=T):n._=T,T.VERSION="1.6.0";var E=T.each=T.forEach=function(n,t,e){if(null==n)return n;if(d&&n.forEach===d)n.forEach(t,e);else if(n.length===+n.length){for(var r=0,u=n.length;u>r;r++)if(t.call(e,n[r],r,n)===i)return}else for(var o=T.keys(n),r=0,u=o.length;u>r;r++)if(t.call(e,n[o[r]],o[r],n)===i)return;return n};T.map=T.collect=function(n,t,e){var r=[];return null==n?r:h&&n.map===h?n.map(t,e):(E(n,function(n,i,u){r.push(t.call(e,n,i,u))}),r)};var A="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(n,t,e,r){var i=arguments.length>2;if(null==n&&(n=[]),v&&n.reduce===v)return r&&(t=T.bind(t,r)),i?n.reduce(t,e):n.reduce(t);if(E(n,function(n,u,o){i?e=t.call(r,e,n,u,o):(e=n,i=!0)}),!i)throw new TypeError(A);return e},T.reduceRight=T.foldr=function(n,t,e,r){var i=arguments.length>2;if(null==n&&(n=[]),m&&n.reduceRight===m)return r&&(t=T.bind(t,r)),i?n.reduceRight(t,e):n.reduceRight(t);var u=n.length;if(u!==+u){var o=T.keys(n);u=o.length}if(E(n,function(a,s,c){s=o?o[--u]:--u,i?e=t.call(r,e,n[s],s,c):(e=n[s],i=!0)}),!i)throw new TypeError(A);return e},T.find=T.detect=function(n,t,e){var r;return C(n,function(n,i,u){return t.call(e,n,i,u)?(r=n,!0):void 0}),r},T.filter=T.select=function(n,t,e){var r=[];return null==n?r:g&&n.filter===g?n.filter(t,e):(E(n,function(n,i,u){t.call(e,n,i,u)&&r.push(n)}),r)},T.reject=function(n,t,e){return T.filter(n,function(n,r,i){return!t.call(e,n,r,i)},e)},T.every=T.all=function(n,t,e){t||(t=T.identity);var r=!0;return null==n?r:y&&n.every===y?n.every(t,e):(E(n,function(n,u,o){return(r=r&&t.call(e,n,u,o))?void 0:i}),!!r)};var C=T.some=T.any=function(n,t,e){t||(t=T.identity);var r=!1;return null==n?r:b&&n.some===b?n.some(t,e):(E(n,function(n,u,o){return r||(r=t.call(e,n,u,o))?i:void 0}),!!r)};T.contains=T.include=function(n,t){return null==n?!1:x&&n.indexOf===x?-1!=n.indexOf(t):C(n,function(n){return n===t})},T.invoke=function(n,t){var e=c.call(arguments,2),r=T.isFunction(t);return T.map(n,function(n){return(r?t:n[t]).apply(n,e)})},T.pluck=function(n,t){return T.map(n,T.property(t))},T.where=function(n,t){return T.filter(n,T.matches(t))},T.findWhere=function(n,t){return T.find(n,T.matches(t))},T.max=function(n,t,e){if(!t&&T.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var r=-1/0,i=-1/0;return E(n,function(n,u,o){var a=t?t.call(e,n,u,o):n;a>i&&(r=n,i=a)}),r},T.min=function(n,t,e){if(!t&&T.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var r=1/0,i=1/0;return E(n,function(n,u,o){var a=t?t.call(e,n,u,o):n;i>a&&(r=n,i=a)}),r},T.shuffle=function(n){var t,e=0,r=[];return E(n,function(n){t=T.random(e++),r[e-1]=r[t],r[t]=n}),r},T.sample=function(n,t,e){return null==t||e?(n.length!==+n.length&&(n=T.values(n)),n[T.random(n.length-1)]):T.shuffle(n).slice(0,Math.max(0,t))};var M=function(n){return null==n?T.identity:T.isFunction(n)?n:T.property(n)};T.sortBy=function(n,t,e){return t=M(t),T.pluck(T.map(n,function(n,r,i){return{value:n,index:r,criteria:t.call(e,n,r,i)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return n.index-t.index}),"value")};var B=function(n){return function(t,e,r){var i={};return e=M(e),E(t,function(u,o){var a=e.call(r,u,o,t);n(i,a,u)}),i}};T.groupBy=B(function(n,t,e){T.has(n,t)?n[t].push(e):n[t]=[e]}),T.indexBy=B(function(n,t,e){n[t]=e}),T.countBy=B(function(n,t){T.has(n,t)?n[t]++:n[t]=1}),T.sortedIndex=function(n,t,e,r){e=M(e);for(var i=e.call(r,t),u=0,o=n.length;o>u;){var a=u+o>>>1;e.call(r,n[a])<i?u=a+1:o=a}return u},T.toArray=function(n){return n?T.isArray(n)?c.call(n):n.length===+n.length?T.map(n,T.identity):T.values(n):[]},T.size=function(n){return null==n?0:n.length===+n.length?n.length:T.keys(n).length},T.first=T.head=T.take=function(n,t,e){return null==n?void 0:null==t||e?n[0]:0>t?[]:c.call(n,0,t)},T.initial=function(n,t,e){return c.call(n,0,n.length-(null==t||e?1:t))},T.last=function(n,t,e){return null==n?void 0:null==t||e?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},T.rest=T.tail=T.drop=function(n,t,e){return c.call(n,null==t||e?1:t)},T.compact=function(n){return T.filter(n,T.identity)};var I=function(n,t,e){return t&&T.every(n,T.isArray)?l.apply(e,n):(E(n,function(n){T.isArray(n)||T.isArguments(n)?t?s.apply(e,n):I(n,t,e):e.push(n)}),e)};T.flatten=function(n,t){return I(n,t,[])},T.without=function(n){return T.difference(n,c.call(arguments,1))},T.partition=function(n,t){var e=[],r=[];return E(n,function(n){(t(n)?e:r).push(n)}),[e,r]},T.uniq=T.unique=function(n,t,e,r){T.isFunction(t)&&(r=e,e=t,t=!1);var i=e?T.map(n,e,r):n,u=[],o=[];return E(i,function(e,r){(t?r&&o[o.length-1]===e:T.contains(o,e))||(o.push(e),u.push(n[r]))}),u},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=function(n){var t=c.call(arguments,1);return T.filter(T.uniq(n),function(n){return T.every(t,function(t){return T.contains(t,n)})})},T.difference=function(n){var t=l.apply(u,c.call(arguments,1));return T.filter(n,function(n){return!T.contains(t,n)})},T.zip=function(){for(var n=T.max(T.pluck(arguments,"length").concat(0)),t=new Array(n),e=0;n>e;e++)t[e]=T.pluck(arguments,""+e);return t},T.object=function(n,t){if(null==n)return{};for(var e={},r=0,i=n.length;i>r;r++)t?e[n[r]]=t[r]:e[n[r][0]]=n[r][1];return e},T.indexOf=function(n,t,e){if(null==n)return-1;var r=0,i=n.length;if(e){if("number"!=typeof e)return r=T.sortedIndex(n,t),n[r]===t?r:-1;r=0>e?Math.max(0,i+e):e}if(x&&n.indexOf===x)return n.indexOf(t,e);for(;i>r;r++)if(n[r]===t)return r;return-1},T.lastIndexOf=function(n,t,e){if(null==n)return-1;var r=null!=e;if(w&&n.lastIndexOf===w)return r?n.lastIndexOf(t,e):n.lastIndexOf(t);for(var i=r?e:n.length;i--;)if(n[i]===t)return i;return-1},T.range=function(n,t,e){arguments.length<=1&&(t=n||0,n=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=0,u=new Array(r);r>i;)u[i++]=n,n+=e;return u};var j=function(){};T.bind=function(n,t){var e,r;if(_&&n.bind===_)return _.apply(n,c.call(arguments,1));if(!T.isFunction(n))throw new TypeError;return e=c.call(arguments,2),r=function(){if(!(this instanceof r))return n.apply(t,e.concat(c.call(arguments)));j.prototype=n.prototype;var i=new j;j.prototype=null;var u=n.apply(i,e.concat(c.call(arguments)));return Object(u)===u?u:i}},T.partial=function(n){var t=c.call(arguments,1);return function(){for(var e=0,r=t.slice(),i=0,u=r.length;u>i;i++)r[i]===T&&(r[i]=arguments[e++]);for(;e<arguments.length;)r.push(arguments[e++]);return n.apply(this,r)}},T.bindAll=function(n){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return E(t,function(t){n[t]=T.bind(n[t],n)}),n},T.memoize=function(n,t){var e={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(e,r)?e[r]:e[r]=n.apply(this,arguments)}},T.delay=function(n,t){var e=c.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},T.defer=function(n){return T.delay.apply(T,[n,1].concat(c.call(arguments,1)))},T.throttle=function(n,t,e){var r,i,u,o=null,a=0;e||(e={});var s=function(){a=e.leading===!1?0:T.now(),o=null,u=n.apply(r,i),r=i=null};return function(){var c=T.now();a||e.leading!==!1||(a=c);var l=t-(c-a);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,a=c,u=n.apply(r,i),r=i=null):o||e.trailing===!1||(o=setTimeout(s,l)),u}},T.debounce=function(n,t,e){var r,i,u,o,a,s=function(){var c=T.now()-o;t>c?r=setTimeout(s,t-c):(r=null,e||(a=n.apply(u,i),u=i=null))};return function(){u=this,i=arguments,o=T.now();var c=e&&!r;return r||(r=setTimeout(s,t)),c&&(a=n.apply(u,i),u=i=null),a}},T.once=function(n){var t,e=!1;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}},T.wrap=function(n,t){return T.partial(t,n)},T.compose=function(){var n=arguments;return function(){for(var t=arguments,e=n.length-1;e>=0;e--)t=[n[e].apply(this,t)];return t[0]}},T.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},T.keys=function(n){if(!T.isObject(n))return[];if(S)return S(n);var t=[];for(var e in n)T.has(n,e)&&t.push(e);return t},T.values=function(n){for(var t=T.keys(n),e=t.length,r=new Array(e),i=0;e>i;i++)r[i]=n[t[i]];return r},T.pairs=function(n){for(var t=T.keys(n),e=t.length,r=new Array(e),i=0;e>i;i++)r[i]=[t[i],n[t[i]]];return r},T.invert=function(n){for(var t={},e=T.keys(n),r=0,i=e.length;i>r;r++)t[n[e[r]]]=e[r];return t},T.functions=T.methods=function(n){var t=[];for(var e in n)T.isFunction(n[e])&&t.push(e);return t.sort()
},T.extend=function(n){return E(c.call(arguments,1),function(t){if(t)for(var e in t)n[e]=t[e]}),n},T.pick=function(n){var t={},e=l.apply(u,c.call(arguments,1));return E(e,function(e){e in n&&(t[e]=n[e])}),t},T.omit=function(n){var t={},e=l.apply(u,c.call(arguments,1));for(var r in n)T.contains(e,r)||(t[r]=n[r]);return t},T.defaults=function(n){return E(c.call(arguments,1),function(t){if(t)for(var e in t)void 0===n[e]&&(n[e]=t[e])}),n},T.clone=function(n){return T.isObject(n)?T.isArray(n)?n.slice():T.extend({},n):n},T.tap=function(n,t){return t(n),n};var N=function(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof T&&(n=n._wrapped),t instanceof T&&(t=t._wrapped);var i=f.call(n);if(i!=f.call(t))return!1;switch(i){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var u=e.length;u--;)if(e[u]==n)return r[u]==t;var o=n.constructor,a=t.constructor;if(o!==a&&!(T.isFunction(o)&&o instanceof o&&T.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1;e.push(n),r.push(t);var s=0,c=!0;if("[object Array]"==i){if(s=n.length,c=s==t.length)for(;s--&&(c=N(n[s],t[s],e,r)););}else{for(var l in n)if(T.has(n,l)&&(s++,!(c=T.has(t,l)&&N(n[l],t[l],e,r))))break;if(c){for(l in t)if(T.has(t,l)&&!s--)break;c=!s}}return e.pop(),r.pop(),c};T.isEqual=function(n,t){return N(n,t,[],[])},T.isEmpty=function(n){if(null==n)return!0;if(T.isArray(n)||T.isString(n))return 0===n.length;for(var t in n)if(T.has(n,t))return!1;return!0},T.isElement=function(n){return!(!n||1!==n.nodeType)},T.isArray=k||function(n){return"[object Array]"==f.call(n)},T.isObject=function(n){return n===Object(n)},E(["Arguments","Function","String","Number","Date","RegExp"],function(n){T["is"+n]=function(t){return f.call(t)=="[object "+n+"]"}}),T.isArguments(arguments)||(T.isArguments=function(n){return!(!n||!T.has(n,"callee"))}),"function"!=typeof/./&&(T.isFunction=function(n){return"function"==typeof n}),T.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},T.isNaN=function(n){return T.isNumber(n)&&n!=+n},T.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==f.call(n)},T.isNull=function(n){return null===n},T.isUndefined=function(n){return void 0===n},T.has=function(n,t){return p.call(n,t)},T.noConflict=function(){return n._=r,this},T.identity=function(n){return n},T.constant=function(n){return function(){return n}},T.property=function(n){return function(t){return t[n]}},T.matches=function(n){return function(t){if(t===n)return!0;for(var e in n)if(n[e]!==t[e])return!1;return!0}},T.times=function(n,t,e){for(var r=Array(Math.max(0,n)),i=0;n>i;i++)r[i]=t.call(e,i);return r},T.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},T.now=Date.now||function(){return(new Date).getTime()};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=T.invert(O.escape);var q={escape:new RegExp("["+T.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(O.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(n){T[n]=function(t){return null==t?"":(""+t).replace(q[n],function(t){return O[n][t]})}}),T.result=function(n,t){if(null==n)return void 0;var e=n[t];return T.isFunction(e)?e.call(n):e},T.mixin=function(n){E(T.functions(n),function(t){var e=T[t]=n[t];T.prototype[t]=function(){var n=[this._wrapped];return s.apply(n,arguments),L.call(this,e.apply(T,n))}})};var $=0;T.uniqueId=function(n){var t=++$+"";return n?n+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(n,t,e){var r;e=T.defaults({},e,T.templateSettings);var i=new RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),u=0,o="__p+='";n.replace(i,function(t,e,r,i,a){return o+=n.slice(u,a).replace(z,function(n){return"\\"+P[n]}),e&&(o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),u=a+t.length,t}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return r(t,T);var s=function(n){return r.call(this,n,T)};return s.source="function("+(e.variable||"obj")+"){\n"+o+"}",s},T.chain=function(n){return T(n).chain()};var L=function(n){return this._chain?T(n).chain():n};T.mixin(T),E(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=u[n];T.prototype[n]=function(){var e=this._wrapped;return t.apply(e,arguments),"shift"!=n&&"splice"!=n||0!==e.length||delete e[0],L.call(this,e)}}),E(["concat","join","slice"],function(n){var t=u[n];T.prototype[n]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return T})}).call(this)},{}],11:[function(n,t,e){e.pickVal=function(n,t){return n+n*t*(1-2*Math.random())},e.floor=function(n,t){return Math.floor(n*Math.pow(10,t))/Math.pow(10,t)},e.valExp=function(n,t){return t=t||2,(Math.exp(n*t)-Math.exp(0))/(Math.exp(t)-Math.exp(0))}},{}],12:[function(n,t,e){e.kickStartWAA=function(){audioContext=new AudioContext;var n=audioContext.createOscillator(),t=audioContext.createGain();return t.gain.value=0,n.connect(t),t.connect(audioContext.destination),n.start(0),n.stop(1),audioContext};var r=e.loadBuffer=function(n,t){a(n,function(e,r){return e?t(e):void o(r,function(e,r){return e?(e instanceof c&&(e.message+=" "+n),t(e)):void t(null,r)})})},u=(e.formatSupport=function(n){var t,e=[],i=[["wav","sounds/format-support/sample.wav"],["mp3","sounds/format-support/sample.mp3"],["ogg","sounds/format-support/sample.ogg"]],u=function(o,a,s){var l;if(a){if(!(a instanceof c))return n(a);l=!1}else l=1===s.numberOfChannels&&50===Math.round(1e3*s.duration)?!0:!1;l===!0&&e.push(o),i.length>0?(t=i.pop(),r(t[1],u.bind(this,t[0]))):n(null,e)};t=i.pop(),r(t[1],u.bind(this,t[0]))},[]);e.plotBuffer=function(n,t){var e=100,r=n.getChannelData(0),o=n.sampleRate,a=t.attr("width")||300,s=t.attr("height")||300,c=[];for(i=0,length=n.length;length>i;i+=e)c.push([i/o,r[i]]);var l=d3.scale.linear().range([0,a]),f=d3.scale.linear().range([s,0]),p=d3.svg.line().x(function(n){return l(n[0])}).y(function(n){return f(n[1])});l.domain(d3.extent(c,function(n){return n[0]})),f.domain(d3.extent(c,function(n){return n[1]})),t.append("path").datum(c).attr("class","plot plot-"+u.length%2).attr("d",p),u.push(n)};var o=function(n,t){audioContext.decodeAudioData(n,function(n){t(null,n)},function(n){t(n||new c("decoding error"),null)})},a=function(n,t){var e=new XMLHttpRequest;e.open("GET",n,!0),e.responseType="arraybuffer",e.onload=function(){200===e.status?t(null,e.response):t(new s(e.statusText))},e.onerror=function(n){t(n||new Error("unexpected request error"),null)},e.send()},s=function(n){this.message=n||""};s.prototype=Object.create(Error.prototype),s.prototype.name="HTTPError";var c=function(n){this.message=n||""};c.prototype=Object.create(Error.prototype),c.prototype.name="DecodeError"},{}],13:[function(n,t,e){var r=n("underscore"),i=!1;$(function(){$("body").on(TouchMouseEvent.DOWN,function(){i=!0}).on(TouchMouseEvent.UP,function(){i=!1})}),e.grid=function(n,t,e){var i=$("<div>",{"class":"grid"});return r.forEach(r.range(t),function(t){var u=$("<div>",{"class":"track track-"+t}).appendTo(i);r.forEach(r.range(e),function(t){$("<div>",{"class":"step step-"+t}).appendTo(u).click(function(){var e=$(this).attr("class");"toggle"===n&&i.find(".step-"+t).removeClass("active"),$(this).attr("class",e).toggleClass("active")})})}),i},e.toggle=function(n){return $("<div>",{"class":"toggle"}).click(function(){$(this).toggleClass("active"),n.call(this,$(this).hasClass("active"))})},e.xyPad=function(n,t){var e=$("<div>",{"class":"xyPad"}),r=$("<div>",{"class":"inner"}).appendTo(e),i=$("<div>",{"class":"cursor"}).appendTo(r),u=$('<div><span class="title">'+(n.title||"")+"</span> "+(n.xLabel||"X")+': <span class="x">0</span> | '+(n.yLabel||"Y")+': <span class="y">1</span></div>',{"class":"valueFeedback"}).appendTo(e),o=.07*$(document).width();e.css({padding:o/2}),i.css({width:o,height:o,left:-o/2,top:-o/2});var a=function(n){var e=Math.max(Math.min(n.pageX-r.get(0).offsetLeft,r.width()),0),a=Math.max(Math.min(n.pageY-r.get(0).offsetTop,r.height()),0),s=Math.min(1-a/r.height(),1),c=Math.min(e/r.width(),1);i.css({left:e-o/2,top:a-o/2}),u.find(".x").html(c.toString().slice(0,4)),u.find(".y").html(s.toString().slice(0,4)),t(c,s)};return e.on(TouchMouseEvent.DOWN,function(){e.on(TouchMouseEvent.MOVE,a)}),r.on(TouchMouseEvent.DOWN,a),$("body").on(TouchMouseEvent.UP,function(){e.off(TouchMouseEvent.MOVE)}),e},e.slider=function(n,t){var e=$("<div>",{"class":"slider"}),r=$("<div>",{"class":"inner"}).appendTo(e),i=$("<div>",{"class":"cursor"}).appendTo(r),u=$('<div><span class="title">'+(n.title||"")+'</span>: <span class="val">0</span>',{"class":"valueFeedback"}).appendTo(e),o=.07*$(document).width();return e.css({paddingLeft:o/2,paddingRight:o/2}),i.css({width:o,height:o,left:-o/2}),e.on(TouchMouseEvent.DOWN,function(){e.on(TouchMouseEvent.MOVE,function(n){var a=Math.max(Math.min(n.pageX-r.get(0).offsetLeft,r.width()),0),s=Math.min(a/e.width(),1);i.css({left:a-o/2}),u.find(".val").html(s.toString().slice(0,4)),t(s)})}),$("body").on(TouchMouseEvent.UP,function(){e.off(TouchMouseEvent.MOVE)}),e}},{underscore:10}]},{},[4]);